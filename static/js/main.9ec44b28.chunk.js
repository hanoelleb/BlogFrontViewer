(this.webpackJsonpblog_front_viewer=this.webpackJsonpblog_front_viewer||[]).push([[0],{23:function(t,e,n){t.exports=n(35)},28:function(t,e,n){},29:function(t,e,n){},35:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(20),c=n.n(r),s=(n(28),n(14)),i=n(1),l=(n(29),"/BlogFrontViewer"),m=n(7),p=n(8),h=n(12),u=n(11),b=n(9),d=n.n(b),f=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(m.a)(this,n),(a=e.call(this,t)).state={posts:[],waiting:!0},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var t=this;fetch("https://hanoelleb-blog-api.herokuapp.com/api/posts").then((function(t){return t.json()})).then((function(e){t.setState({posts:e.posts.post_list,waiting:!1})}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h2",null,"Welcome!"),this.state.waiting?o.a.createElement("p",null,"Loading..."):this.state.posts.map((function(t){return o.a.createElement(v,{post:t})})))}}]),n}(o.a.Component),v=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(m.a)(this,n),(a=e.call(this,t)).state={toPost:!1},a}return Object(p.a)(n,[{key:"render",value:function(){var t=this;return this.state.toPost?o.a.createElement(i.a,{to:l+"/post/"+this.props.post._id}):o.a.createElement("div",{className:d.a.blog},o.a.createElement("h2",{onClick:function(){t.setState({toPost:!0})}},this.props.post.title),o.a.createElement("p",null,this.props.post.content))}}]),n}(o.a.Component),g=f,E=n(22),j=n(6),k=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(m.a)(this,n),(a=e.call(this,t)).getData=a.getData.bind(Object(j.a)(a)),a.state={waiting:!0,post:{},comments:[]},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.match.params.id;fetch("https://hanoelleb-blog-api.herokuapp.com/api/post/"+e,{headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(e){return t.setState({post:e.post,comments:e.comments,waiting:!1})}))}},{key:"getData",value:function(){var t=this,e=this.props.match.params.id;fetch("https://hanoelleb-blog-api.herokuapp.com/api/post/"+e,{headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(e){return t.setState({post:e.post,comments:e.comments,waiting:!1})}))}},{key:"render",value:function(){return this.state.waiting?o.a.createElement("h2",null,"Loading..."):o.a.createElement("div",null,o.a.createElement(s.b,{className:d.a.blogLink,to:l},"View all posts"),o.a.createElement("div",{className:d.a.blog},o.a.createElement("h2",null,this.state.post.title),o.a.createElement("p",null,this.state.post.content)),o.a.createElement(O,{id:this.props.match.params.id,createHandler:this.getData,comments:this.state.comments}))}}]),n}(o.a.Component),O=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(m.a)(this,n),(a=e.call(this,t)).closeForm=a.closeForm.bind(Object(j.a)(a)),a.createHandler=a.createHandler.bind(Object(j.a)(a)),a.state={openForm:!1},a}return Object(p.a)(n,[{key:"closeForm",value:function(){this.setState({openForm:!1})}},{key:"createHandler",value:function(){this.setState({openForm:!1}),this.props.createHandler()}},{key:"render",value:function(){var t=this;return o.a.createElement("div",null,o.a.createElement("h2",null,"Comments"),o.a.createElement("button",{onClick:function(){t.setState({openForm:!0})}},"Post Comment"),o.a.createElement("div",{className:"comments"},this.props.comments.length>0?this.props.comments.map((function(t,e){return o.a.createElement("div",{className:d.a.comment,key:e},o.a.createElement("h3",null,t.author),o.a.createElement("p",null,t.content))})):o.a.createElement("h3",null,"No comments on this post")),this.state.openForm?o.a.createElement(y,{id:this.props.id,handler:this.closeForm,createHandler:this.createHandler}):null)}}]),n}(o.a.Component),y=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(m.a)(this,n),(a=e.call(this,t)).handleSubmit=a.handleSubmit.bind(Object(j.a)(a)),a.handleChange=a.handleChange.bind(Object(j.a)(a)),a.state={author:"",content:""},a}return Object(p.a)(n,[{key:"handleSubmit",value:function(t){var e=this;t.preventDefault();var n={author:this.state.author,content:this.state.content};fetch("https://hanoelleb-blog-api.herokuapp.com/api/post/"+this.props.id+"/comment",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(t){return t.json()})).then((function(t){return e.props.createHandler()}))}},{key:"handleChange",value:function(t){this.setState(Object(E.a)({},t.target.name,t.target.value))}},{key:"render",value:function(){return o.a.createElement("form",{onSubmit:this.handleSubmit,className:d.a.commentForm},o.a.createElement("button",{onClick:this.props.handler},"Cancel"),o.a.createElement("input",{type:"text",name:"author",placeholder:"name/nickname",value:this.state.name,onChange:this.handleChange}),o.a.createElement("textarea",{type:"text",name:"content",rows:"4",cols:"40",placeholder:"Enter your comment.",value:this.state.content,onChange:this.handleChange}),o.a.createElement("input",{type:"submit",value:"Post comment"}))}}]),n}(o.a.Component),w=k;var C=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement(s.a,null,o.a.createElement(i.b,{exact:!0,path:l,component:g}),o.a.createElement(i.b,{exact:!0,path:"/BlogFrontViewer/post/:id",component:w}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},9:function(t,e,n){t.exports={blog:"blog_blog__3JtYz",blogLink:"blog_blogLink__1As47",commentForm:"blog_commentForm__3Qo9Q",comment:"blog_comment__bVhsj"}}},[[23,1,2]]]);
//# sourceMappingURL=main.9ec44b28.chunk.js.map